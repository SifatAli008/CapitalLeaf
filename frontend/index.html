<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CapitalLeaf - Zero Trust Authentication</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="auth-container">
        <div class="auth-header">
            <div class="logo">
                <i class="fas fa-shield-alt"></i>
                <h1>CapitalLeaf</h1>
            </div>
            <p class="subtitle">Zero Trust Security Framework</p>
        </div>

        <!-- Login Form -->
        <div class="auth-form" id="loginForm">
            <h2>Secure Login</h2>
            <form id="loginFormElement">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" name="username" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" required>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="rememberDevice"> 
                        Trust this device
                    </label>
                </div>

                <button type="submit" class="btn-primary">
                    <i class="fas fa-sign-in-alt"></i>
                    Login Securely
                </button>
            </form>
        </div>

        <!-- MFA Challenge -->
        <div class="auth-form hidden" id="mfaForm">
            <h2>Multi-Factor Authentication</h2>
            <div class="risk-indicator">
                <div class="risk-score" id="riskScore">
                    <span class="risk-label">Risk Score:</span>
                    <span class="risk-value" id="riskValue">0.0</span>
                </div>
                <div class="risk-bar">
                    <div class="risk-fill" id="riskFill"></div>
                </div>
            </div>

            <div class="mfa-methods" id="mfaMethods">
                <!-- MFA methods will be dynamically populated -->
            </div>

            <div class="security-recommendations" id="securityRecommendations">
                <!-- Security recommendations will be shown here -->
            </div>

            <button type="button" class="btn-secondary" onclick="skipMFA()">
                <i class="fas fa-times"></i>
                Skip MFA (Not Recommended)
            </button>
        </div>

        <!-- Device Registration -->
        <div class="auth-form hidden" id="deviceRegistrationForm">
            <h2>Register New Device</h2>
            <div class="device-info">
                <div class="device-detail">
                    <i class="fas fa-desktop"></i>
                    <span id="deviceName">Unknown Device</span>
                </div>
                <div class="device-detail">
                    <i class="fas fa-globe"></i>
                    <span id="deviceLocation">Unknown Location</span>
                </div>
                <div class="device-detail">
                    <i class="fas fa-clock"></i>
                    <span id="deviceTime">Unknown Time</span>
                </div>
            </div>

            <div class="form-group">
                <label for="deviceName">Device Name</label>
                <input type="text" id="deviceNameInput" placeholder="My Laptop">
            </div>

            <button type="button" class="btn-primary" onclick="registerDevice()">
                <i class="fas fa-check"></i>
                Register Device
            </button>
        </div>

        <!-- Security Dashboard -->
        <div class="auth-form hidden" id="securityDashboard">
            <h2>Security Dashboard</h2>
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3>Risk Assessment</h3>
                    <div class="risk-breakdown" id="riskBreakdown">
                        <!-- Risk factors will be displayed here -->
                    </div>
                </div>

                <div class="dashboard-card">
                    <h3>Active Sessions</h3>
                    <div class="sessions-list" id="sessionsList">
                        <!-- Active sessions will be displayed here -->
                    </div>
                </div>

                <div class="dashboard-card">
                    <h3>Behavioral Analysis</h3>
                    <div class="behavioral-analysis" id="behavioralAnalysis">
                        <!-- Behavioral analysis will be displayed here -->
                    </div>
                </div>
            </div>

            <button type="button" class="btn-primary" onclick="proceedToApp()">
                <i class="fas fa-arrow-right"></i>
                Proceed to Application
            </button>
        </div>

        <!-- Loading Spinner -->
        <div class="loading hidden" id="loading">
            <div class="spinner"></div>
            <p>Analyzing security context...</p>
        </div>
    </div>

    <script src="device-fingerprint.js"></script>
    <script src="auth.js"></script>
</body>
</html>
